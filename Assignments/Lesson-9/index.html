<!doctype html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WeatherNow for the Franklin area</title>
  <meta name="author" content="Robert Thalman">
  <meta name="description" content="WeatherNow for Franklin, Greenville, Springfield">
  <!-- external style references in the proper cascading order -->    
  <link href="https://fonts.googleapis.com/css?family=Lato:400,400i,900" rel="stylesheet"> 
  <link href="css/normalize.css" rel="stylesheet"> <!-- normalize useragent/browser defaults -->
  <link href="css/small.css" rel="stylesheet">    <!-- default styles - small/phone views -->
  <link href="css/medium.css" rel="stylesheet">  <!-- medium/tablet views -->
  <link href="css/large.css" rel="stylesheet">   <!-- large/wide/desktop views --> 
    <link href="scripts/weather.json" re="scripts">
</head>
<body>

  <header>
    <div class="container">
      <img src="images/pexels-photo-314726.jpeg" alt="The WeatherNow" width="100%" height="127 rem">
    <div class="header"><h1>WeatherNow</h1></div>
    </div>
    <div class="subheading"><i>Our weather Now for our neck of the Woods</i></div>
  </header>

  <!-- site navigation use placeholder references -->
  <nav>
    <button onclick="toggleNavMenu()">&#9776;</button>
    <ul id="mainNav" class="hide">
                <li class="active"><a href="index.html">Home</a></li>
                <li><a href="franklin.html">Franklin</a></li>
                <li><a href="greenville.html">Greenville</a></li>
                <li><a href="springfield.html">Springfield</a></li>
                <li><a href="stormcenter.html">Storm Center</a></li>
                <li><a href="gallery.html">Gallery</a></li>
            </ul>	
  </nav>		
  

    <main id=thetowns>
        
    </main>
    <section class=thetowns>
    </section> 
<article style="">
    <h2>Weather Story</h2>
    <p>Nullam tristique massa magna, sed rutrum sapien sonsectetur it. Donec erat doolr, posuere sed erat vitae, volutpat lobortis orci crabutru ut dfficitur nisl. Mumc elementum dolor in ierat cursus, eNullam tristique massa magna, sed rutrum sapien sonsectetur it. Donec erat doolr, posuere sed erat vitae, volutpat lobortis orci crabutru ut dfficitur nisl. Mumc elementum dolor in ierat.</p>
    <img src="images/iStock-186538582-ColumnA-min.jpg">
    </article>
   
   <script>
                var header = document.querySelector('header');
                var section = document.querySelector('section');
                var requestURL = 'https://byui-cit230.github.io/weather/data/towndata.json';
                var request = new XMLHttpRequest();
                request.open('GET', requestURL);
                request.responseType = 'json';
                request.send();
                request.onload = function() {
                    var towns = request.response;
                    populateHeader(towns);
                    showTowns(towns);
                }
                function populateHeader(jsonObj) {
                    var myH1 = document.createElement('h1');
                    
                    header.appendChild(myH1);

                    var myPara = document.createElement('p');
                    
                    header.appendChild(myPara);
                }
                function showTowns(jsonObj) {
                    var towns = jsonObj['towns'];
                    towns.splice (2,1);

                    for (var i = 0; i < towns.length; i++) {
                        var myArticle = document.createElement('article');
                        var myH2 = document.createElement('h2');
                        var myPara1 = document.createElement('p');
                        var myPara2 = document.createElement('p');
                        var myPara3 = document.createElement('p');
                        var myPara4 = document.createElement('p');
                        var myPara5 = document.createElement('p');
                        var myList = document.createElement('ul');

                        myH2.textContent = towns[i].name;
                        myPara1.textContent = 'Motto: ' + towns[i].motto;
                        myPara2.textContent = 'Founded: ' + towns[i].yearFounded;
                        myPara3.textContent = 'Current population: ' + towns[i].currentPopulation;
                        myPara4.textContent = 'Average Rainfall: ' + towns[i].averageRainfall + " inches";
                        myPara5.textContent = 'Community Events:';

                        var communityEvents = towns[i].events;
                        for (var j = 0; j < communityEvents.length; j++) {
                            var listItem = document.createElement('li');
                            listItem.textContent = communityEvents[j];
                            myList.appendChild(listItem);
                        }

                        myArticle.appendChild(myH2);
                        myArticle.appendChild(myPara1);
                        myArticle.appendChild(myPara2);
                        myArticle.appendChild(myPara3);
                        myArticle.appendChild(myPara4);
                        myArticle.appendChild(myPara5);
                        myArticle.appendChild(myList);

                        section.appendChild(myArticle);
                    }
                }

            </script>   
    

  <footer>
    <aside>
      <p>WeatherNow.com</p>
        <p>Allotte Street</p>
        <p>Franklin, MN 37213</p>
    </aside>
    <p class="footer-bar">&copy;2017 All Rights Reserved | WeatherNow| <span id="currentdate">Current Date Placeholder</span></p>
  </footer>
    
  <script src="scripts/hamburger.js"></script>
  <script src="scripts/currentdate.js"></script>

</body>
</html>